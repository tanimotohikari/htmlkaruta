<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
<title>かるた</title>
<style>
  .karuta {
    display: table;
    text-align: center;
    width: 130px;
    height: 185px;
    float: left;
    margin: 5px;
    background: #aaa;
    border-radius: 3px;
    box-sizing: border-box;
  }
  .karuta-card {
    height: 148px;
    display: table-cell;
    margin: 3px;
    color: #fff;
    font-size: 15px;
    font-weight: bold;
    vertical-align: middle;
  }
  .karuta-card input {
    -webkit-appearance: none;
  }
  .is-select {
    background: #e53!important;
  }
  .is-hide {
    display: none;
  }
</style>
<script src="/socket.io/socket.io.js"></script>
<script src="//code.jquery.com/jquery-1.11.1.js"></script>
</head>
<body>
<script>
//サーバー側とつなぐ
var socket = io();
var selectCard;

$(function() {
  // 送信されたときの処理  
  $('form').submit(function() {
    // メッセージを取得
    var mensaje = $('#msj').val();
    
    // メッセージがなければ終了 
    if (mensaje === '') return false;
    
    // メッセージを送信
    socket.emit('message', mensaje);
    
    // メッセージの中身を空にしえフォーカスする
    $('#msj').val('').focus();
    return false;
  });
    
  // チャンネルを変えた時の処理
  $('#channel').on('change', function() {
    // チャンネル変更する
    socket.emit('changeChannel', $('#channel').val());
  });

  $('.js-karuta-card').on('click',function(e){
    selectCard = $(this).val();

    e.preventDefault();
    socket.json.emit('emit_from_client', {
      select: selectCard,
    });
  });

  $('.btn-select').on('click', function(e){
    e.preventDefault();
    socket.json.emit('emit_from_client', {
      room: $('#rooms').val()
    });
  });

  socket.on('emit_from_server', function(data){
    if(data){
      $('.area').removeClass('is-hide');
    }
    //$('#logs').append($('<li>').text('【' + data.room + '】'));
    //$('#' + data).addClass('is-select');
  })
});

//ここで作ったイベント名でサーバーサイドの処理を紐付ける-->
socket.on('welcome', function() {
  // 取得したメッセージをulに追加
  $('#message').append($('<li>').text('ようこそ！！'));
});

socket.on('userChannel', function(cnt) {
  // 取得したメッセージをulに追加
  $('#user_cnt p').html('').text("(A :" + cnt.a +"人) (B :" + cnt.b + "人)");
});

socket.on('message', function(msj, id) {
  // 取得したメッセージをulに追加
  $('#message').append($('<li>').text(id + " : " + msj));
});

socket.on('changeChannel', function(channel) {
  // チャンネルが変わったことをメッセージで表示
  $('#message').html('').append($('<li>').text('「チャンネル' + channel + '」に変更されました!'));
});

socket.on('getId', function(id) {
  // チャンネルが変わったことをメッセージで表示
  $('#user_name p').html('').text(id);
});
</script>
  <form action="select.html">
    <input class="btn-select" type="submit" value="select">
    <ul class='area is-hide clearfix'>
      <label>
        <li id="1" class="karuta">
          <span class="karuta-card">
            <input class="js-karuta-card" name="test" type="radio" value="1">< br >
          </span>
        </li>
      </label>
      <label>
        <li id="2" class="karuta">
          <span class="karuta-card">
            <input class="js-karuta-card" name="test" type="radio" value="2">< caption >
          </span>
        </li>
      </label>
      <label>
        <li id="3" class="karuta">
          <span class="karuta-card">
            <input class="js-karuta-card" name="test" type="radio" value="3">< body >
          </span>
        </li>
      </label>
    </ul>
  </form>
  <div id="controls">
    <form action="">
      <select name="channel" id="channel">
        <option value="A">チャンネルA</option>
        <option value="B">チャンネルB</option>
      </select>
    </form> 
 </div>
</body>
</html>